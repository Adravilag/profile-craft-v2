/* ===========================================
   PERFORMANCE OPTIMIZATION SYSTEM
   Critical CSS and performance enhancements
   =========================================== */

/* ===========================================
   CRITICAL CSS - Above the fold styles
   These styles are essential for initial render
   =========================================== */

/* Critical base styles - inline these for fastest loading */
:root {
  /* Critical design tokens - most frequently used */
  --color-primary: #e6edf3;
  --color-secondary: #7d8590;
  --color-accent: #4493f8;
  --bg-primary: #0d1117;
  --bg-secondary: #161b22;
  --font-mono: 'JetBrains Mono', 'Fira Code', 'SF Mono', monospace;
  --space-4: 16px;
  --radius-md: 6px;
  --duration-fast: 150ms;
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
}

/* Critical layout - prevents layout shift */
html,
body,
#root {
  height: 100%;
  margin: 0;
  padding: 0;
}

/* Base body styles (moved to reset.css). Keep performance-only rules here. */

/* Critical terminal container - prevents layout shift */
.terminal-container {
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
  background-color: var(--bg-primary);
}

/* ===========================================
   PERFORMANCE OPTIMIZATIONS
   =========================================== */

/* GPU acceleration for animations */
.animated-element,
.terminal-line,
.cursor,
.typewriter-text {
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Optimize font rendering */
@font-face {
  font-family: 'JetBrains Mono';
  font-display: swap; /* Improve loading performance */
  font-weight: 400 700;
  src:
    local('JetBrains Mono'),
    url('/fonts/jetbrains-mono.woff2') format('woff2');
}

/* Contain layout and paint for better performance */
.terminal-section {
  contain: layout style paint;
}

.terminal-output {
  contain: layout paint;
}

/* Optimize scrolling performance */
.scrollable-content {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* ===========================================
   LAZY LOADING OPTIMIZATIONS
   =========================================== */

/* Defer non-critical animations */
.deferred-animation {
  animation-play-state: paused;
}

.deferred-animation.loaded {
  animation-play-state: running;
}

/* Optimize image loading */
img {
  loading: lazy;
  decoding: async;
}

/* ===========================================
   REDUCED MOTION OPTIMIZATIONS
   =========================================== */

@media (prefers-reduced-motion: reduce) {
  /* Disable all animations for better performance */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Remove GPU acceleration when not needed */
  .animated-element,
  .terminal-line,
  .cursor,
  .typewriter-text {
    will-change: auto;
    transform: none;
  }
}

/* ===========================================
   MEMORY OPTIMIZATION
   =========================================== */

/* Limit repaints and reflows */
.static-element {
  contain: strict;
}

/* Optimize for mobile devices */
@media (max-width: 768px) {
  /* Reduce complexity on mobile */
  .complex-animation {
    animation: none;
  }

  /* Simplify shadows on mobile */
  .shadow-element {
    box-shadow: none;
  }
}

/* ===========================================
   BROWSER OPTIMIZATION HINTS
   =========================================== */

/* Hint to browser about important resources */
.preload-hint::before {
  content: '';
  position: absolute;
  width: 0;
  height: 0;
  background-image: url('/fonts/jetbrains-mono.woff2');
  opacity: 0;
  pointer-events: none;
}
